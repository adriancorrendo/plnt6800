<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Adrian Correndo">

<title>PLNT*6800 - Reproducible Ag Data Science with R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="index_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#course-outline" id="toc-course-outline" class="nav-link active" data-scroll-target="#course-outline">Course Outline</a>
  <ul class="collapse">
  <li><a href="#course-information" id="toc-course-information" class="nav-link" data-scroll-target="#course-information">1. Course Information</a>
  <ul class="collapse">
  <li><a href="#lecture-schedule" id="toc-lecture-schedule" class="nav-link" data-scroll-target="#lecture-schedule">Lecture Schedule</a></li>
  <li><a href="#instructor-information" id="toc-instructor-information" class="nav-link" data-scroll-target="#instructor-information">Instructor Information</a></li>
  </ul></li>
  <li><a href="#course-description" id="toc-course-description" class="nav-link" data-scroll-target="#course-description">2. Course Description</a>
  <ul class="collapse">
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisite(s)</a></li>
  <li><a href="#textbooks-and-resources" id="toc-textbooks-and-resources" class="nav-link" data-scroll-target="#textbooks-and-resources">Textbooks and Resources</a></li>
  </ul></li>
  <li><a href="#course-learning-outcomes" id="toc-course-learning-outcomes" class="nav-link" data-scroll-target="#course-learning-outcomes">3. Course Learning Outcomes</a></li>
  <li><a href="#calendar" id="toc-calendar" class="nav-link" data-scroll-target="#calendar">4. Calendar</a>
  <ul class="collapse">
  <li><a href="#last-day-to-drop-course" id="toc-last-day-to-drop-course" class="nav-link" data-scroll-target="#last-day-to-drop-course">Last Day to Drop Course</a></li>
  </ul></li>
  <li><a href="#assessment-breakdown" id="toc-assessment-breakdown" class="nav-link" data-scroll-target="#assessment-breakdown">5. Assessment Breakdown</a>
  <ul class="collapse">
  <li><a href="#final-exam" id="toc-final-exam" class="nav-link" data-scroll-target="#final-exam">Final Exam</a></li>
  </ul></li>
  <li><a href="#course-policies" id="toc-course-policies" class="nav-link" data-scroll-target="#course-policies">6. Course Policies</a>
  <ul class="collapse">
  <li><a href="#a.-late-submissions" id="toc-a.-late-submissions" class="nav-link" data-scroll-target="#a.-late-submissions">a. Late Submissions</a></li>
  <li><a href="#b.-use-of-devices" id="toc-b.-use-of-devices" class="nav-link" data-scroll-target="#b.-use-of-devices">b. Use of Devices</a></li>
  <li><a href="#c.-academic-honesty" id="toc-c.-academic-honesty" class="nav-link" data-scroll-target="#c.-academic-honesty">c.&nbsp;Academic honesty</a></li>
  </ul></li>
  <li><a href="#accessibility" id="toc-accessibility" class="nav-link" data-scroll-target="#accessibility">7. Accessibility</a></li>
  <li><a href="#land-acknowledgement" id="toc-land-acknowledgement" class="nav-link" data-scroll-target="#land-acknowledgement">8. Land Acknowledgement</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PLNT*6800 - Reproducible Ag Data Science with R</h1>
<p class="subtitle lead">Winter 2025</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Adrian Correndo </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="course-outline" class="level1">
<h1>Course Outline</h1>
<section id="course-information" class="level2">
<h2 class="anchored" data-anchor-id="course-information">1. Course Information</h2>
<ul>
<li><strong>Course Code:</strong> PLNT6800</li>
<li><strong>Course Title:</strong> Reproducible Ag Data Science with R</li>
<li><strong>Term:</strong> Winter</li>
<li><strong>Credits:</strong> 0.50</li>
</ul>
<section id="lecture-schedule" class="level3">
<h3 class="anchored" data-anchor-id="lecture-schedule">Lecture Schedule</h3>
<ul>
<li><strong>Days:</strong> Wednesdays and Fridays</li>
<li><strong>Time:</strong> 1:00 pm - 2:20 pm</li>
<li><strong>Location:</strong> MCKN 310</li>
</ul>
</section>
<section id="instructor-information" class="level3">
<h3 class="anchored" data-anchor-id="instructor-information">Instructor Information</h3>
<ul>
<li><strong>Dr.&nbsp;Adrian Correndo</strong></li>
<li><strong>Email:</strong> acorrend@uoguelph.ca</li>
</ul>
</section>
</section>
<section id="course-description" class="level2">
<h2 class="anchored" data-anchor-id="course-description">2. Course Description</h2>
<p>Reproducible Ag Data Science with R is designed for graduate students in crop and soil sciences to develop key skills in data science using R. This course emphasizes reproducibility in data analysis, ensuring that results can be consistently replicated. Students will learn essential data science concepts, and how to use functions, packages, and version control to effectively manage their data and collaborate with peers. Following tidy principles, the course promotes best coding practices for data wrangling, effective visualization, and clean deployment of statistical models common in agriculture. By the end of the course, students will be equipped to handle a variety of agricultural datasets and produce reliable, reproducible research outcomes.</p>
<section id="prerequisites" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites">Prerequisite(s)</h3>
<p>A basic understanding of R or any programming language is recommended but not required. Basic statistical theory is also recommended.</p>
</section>
<section id="textbooks-and-resources" class="level3">
<h3 class="anchored" data-anchor-id="textbooks-and-resources">Textbooks and Resources</h3>
<p><strong>Recommended:</strong></p>
<ul>
<li><p><em>R for Data Science</em> by Hadley Wickham &amp; Garrett Grolemund</p></li>
<li><p>Online resources and package documentation will be provided throughout the course.</p></li>
</ul>
</section>
</section>
<section id="course-learning-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="course-learning-outcomes">3. Course Learning Outcomes</h2>
<p>By the end of this course, students will be able to:</p>
<ol type="1">
<li><p>Understand and apply the principles of reproducible research in data science.</p></li>
<li><p>Use version control tools like GitHub for managing code and collaborative projects.</p></li>
<li><p>Develop proficiency in R, including data wrangling, data visualization, and the use of relevant packages for agricultural datasets.</p></li>
<li><p>Apply statistical models to agricultural data and interpret the results.</p></li>
<li><p>Produce professional reports using RMarkdown and Quarto, ensuring reproducibility and clarity.</p></li>
</ol>
</section>
<section id="calendar" class="level2">
<h2 class="anchored" data-anchor-id="calendar">4. Calendar</h2>
<p>The course runs on Wednesdays and Fridays from 1:00 PM to 2:20 PM. Below is the <em>tentative</em> schedule. Please, note the schedule may vary depending on the progress of the class.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 38%">
<col style="width: 15%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Week</strong></th>
<th><strong>Date</strong></th>
<th><strong>Topic</strong></th>
<th><strong>Code</strong></th>
<th><strong>Lesson</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Jan 8</td>
<td>Introductions, Reproducibility</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td></td>
<td>Jan 10</td>
<td>Basics of version control &amp; GitHub</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Jan 15</td>
<td>Fundamentals of R Coding I</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td></td>
<td>Jan 17</td>
<td>Fundamentals of R Coding II</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Jan 22</td>
<td>Data Wrangling I</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td></td>
<td>Jan 24</td>
<td>Data Wrangling II</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Jan 29</td>
<td>Data Wrangling III</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td></td>
<td>Jan 31</td>
<td>Iteration: Loops &amp; Mapping</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Feb 5</td>
<td>Weather Data: Retrieving &amp; Processing</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td></td>
<td>Feb 7</td>
<td>Data Viz I: ggplot2</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td>6</td>
<td>Feb 12</td>
<td>Data Viz II: Layers &amp; Basic Plots</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td></td>
<td>Feb 14</td>
<td>Data Viz III: Advanced plots, maps</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td><em>Winter Break begins after the end of class</em></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>7</td>
<td>Feb 26</td>
<td>Models I: Data Types &amp; Distributions</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td></td>
<td>Feb 28</td>
<td>Models II: Explanatory vs.&nbsp;Predictive</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td>8</td>
<td>Mar 5</td>
<td>Models III: Linear Models</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td></td>
<td>Mar 7</td>
<td>Models IV: Fixed vs.&nbsp;Random Effects</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td>9</td>
<td>Mar 12</td>
<td>Models V: Mixed Effect Models</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td></td>
<td>Mar 14</td>
<td>Models VI: Simple Linear Regression</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td>10</td>
<td>Mar 19</td>
<td>Models VII: Multiple Linear Regression</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td></td>
<td>Mar 24</td>
<td>Models VIII: Multivariate Analysis</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td>11</td>
<td>Mar 26</td>
<td>Quarto / Rmarkdown tricks</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="odd">
<td></td>
<td>Mar 28</td>
<td>Review class</td>
<td>üåê</td>
<td>üé•</td>
</tr>
<tr class="even">
<td>12</td>
<td>Apr 2</td>
<td>Semester Projects Presentations I</td>
<td>üåê</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Apr 4</td>
<td>Semester Projects Presentations II</td>
<td>üåê</td>
<td></td>
</tr>
<tr class="even">
<td>13</td>
<td>Apr 11</td>
<td>Final Exam Due (11.59 pm)</td>
<td>üåê</td>
<td></td>
</tr>
</tbody>
</table>
<section id="last-day-to-drop-course" class="level3">
<h3 class="anchored" data-anchor-id="last-day-to-drop-course">Last Day to Drop Course</h3>
<p>TBD</p>
</section>
</section>
<section id="assessment-breakdown" class="level2">
<h2 class="anchored" data-anchor-id="assessment-breakdown">5. Assessment Breakdown</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 23%">
<col style="width: 23%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Weight (%)</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Weekly Exercises</td>
<td>30%</td>
<td>Hands-on exercises to practice skills covered in each week‚Äôs topic.</td>
</tr>
<tr class="even">
<td>Semester Project</td>
<td>50%</td>
<td>Complete data analysis project, report, and presentation.</td>
</tr>
<tr class="odd">
<td>Final Exam</td>
<td>20%</td>
<td>Cumulative assessment covering all topics from the course.</td>
</tr>
</tbody>
</table>
<section id="final-exam" class="level3">
<h3 class="anchored" data-anchor-id="final-exam">Final Exam</h3>
<ul>
<li><strong>Date:</strong> Apr 11, 11.59 pm.</li>
</ul>
</section>
</section>
<section id="course-policies" class="level2">
<h2 class="anchored" data-anchor-id="course-policies">6. Course Policies</h2>
<section id="a.-late-submissions" class="level3">
<h3 class="anchored" data-anchor-id="a.-late-submissions">a. Late Submissions</h3>
<p>Assignments submitted late will be penalized 5% per day, up to six days. Extensions granted only for valid reasons.</p>
</section>
<section id="b.-use-of-devices" class="level3">
<h3 class="anchored" data-anchor-id="b.-use-of-devices">b. Use of Devices</h3>
<p>Electronic recording of classes is forbidden without prior permission from the instructor.</p>
</section>
<section id="c.-academic-honesty" class="level3">
<h3 class="anchored" data-anchor-id="c.-academic-honesty">c.&nbsp;Academic honesty</h3>
<p>Please adhere to the following guidelines when working on assignments for this course:</p>
<ul>
<li><p><strong>Individual and Team Assignments</strong>: You are welcome to discuss individual homework and lab assignments with other students; however, direct sharing or copying of code or written work is not permitted. For team assignments, collaboration is allowed freely within your team. Sharing or copying code or written content between teams is prohibited. Any unauthorized sharing or copying will be treated as a violation for all parties involved.</p></li>
<li><p><strong>Exams</strong>: Collaboration or discussion with others during exams is strictly prohibited. Unauthorized collaboration or use of unapproved materials will be considered a violation for all students involved.</p></li>
<li><p><strong>Reusing Code</strong>: Unless specified otherwise, you may refer to online resources (e.g., StackOverflow) for coding examples in assignments. If you use code from an external source directly or take inspiration from it, you must clearly cite the source. The use of AI to complete tasks is not prohibited but it must be disclosed. Failure to cite reused code will be considered plagiarism.</p></li>
</ul>
</section>
</section>
<section id="accessibility" class="level2">
<h2 class="anchored" data-anchor-id="accessibility">7. Accessibility</h2>
<p>Students requiring accommodations must register with Student Accessibility Services. Contact the instructor early in the semester to arrange accommodations.</p>
</section>
<section id="land-acknowledgement" class="level2">
<h2 class="anchored" data-anchor-id="land-acknowledgement">8. Land Acknowledgement</h2>
<p>The University of Guelph resides on the ancestral lands of the Attawandaron people and the treaty lands and territory of the Mississaugas of the Credit. We recognize the significance of the Dish with One Spoon Covenant to this land and offer respect to our Anishinaabe, Haudenosaunee, and M√©tis neighbours. Today, this gathering place is home to many First Nations, Inuit, and M√©tis peoples, and acknowledging them reminds us of our important connection to this land where we work and learn.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>